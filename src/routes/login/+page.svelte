<script lang="ts">
  import type { Provider } from "LoginProvider";
  import KakaoLoginBtn from "$lib/components/kakaoLoginBtn.svelte";

  const KakaoOauthProviders : Provider = {
    name: 'Kakao',
    icon: '/oauthBtn/kakaotalk_sharing_btn_medium.png',
    url: '/api/login/kakao'
  };

  function handleLogin(provider: Provider) {
    // í˜„ì¬ ê²½ë¡œ ì €ì¥
    const previousUrl = document.referrer || '/'; // referrerê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ '/'ë¡œ
    localStorage.setItem('redirectAfterLogin', previousUrl);
    // ë¡œê·¸ì¸ URLë¡œ ì´ë™
    window.location.href = provider.url;
  }
</script>

<div class="container">
  <div class="card">
    <h1>Planetì— ì˜¤ì‹  ê±¸<br/>í™˜ì˜í•©ë‹ˆë‹¤ ğŸŒŸ</h1>

    <p class="intro">
      ì˜¤ëŠ˜ì˜ í•  ì¼ì„ ê¸°ë¡í•˜ê³ , <br/>
      ëª©í‘œë¥¼ ë‹¬ì„±í•˜ë©° ì„±ì¥í•˜ëŠ” ê³¼ì •ì„ <br/>
      ì¹œêµ¬ë“¤ê³¼ ê³µìœ í•˜ì„¸ìš” ğŸš€
    </p>

    <div class="btn-list">
      <KakaoLoginBtn provider={KakaoOauthProviders} on:click={() => handleLogin(KakaoOauthProviders)} />
    </div>

    <p class="desc">Planetì— ë¡œê·¸ì¸í•˜ì—¬ ë‚˜ë§Œì˜ ì‘ì€ ìš°ì£¼ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš” ğŸŒŒ</p>
  </div>
</div>

<style>
.container {
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}

h1 {
  font-size: 1.8rem;
  margin-bottom: 1rem;
}

.intro {
  font-size: 0.95rem;
  margin-bottom: 2rem;
  line-height: 1.5;
}

.btn-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.desc {
  margin-top: 1.8rem;
  font-size: 0.85rem;
  color: var(--text-color);
}
</style>
